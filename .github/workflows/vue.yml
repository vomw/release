
name: vue
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: ['16.x', '18.x', '20.x']

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: environment
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}

      - name: npm install
        run: |
          npm version
          npm cache clean --force
          npm help install
          # npm install --if-present
          # npm run serve
          # CI=false npm install
          # npm ci
          # yarn install
          npm install
          npm audit fix --force


      - name: npm run build
        run: |
          npm run build

      # - name: npm run test # npm ERR! Missing script: "test"
      #   run: |
      #     npm run test

      - name: npm run lint
        run: |
          npm run lint

      - name: npm run generate
        run: |
          npm run generate

      - name: check files
        run: |
          sudo rm .gitignore
          git status
          ls -alht dist

      # - name: Setup Pages  # Configures pages for deployment.
      #   id: pages
      #   uses: actions/configure-pages@v3

      # - name: Build with Jekyll  # Builds the application with Jekyll.
      #   uses: actions/jekyll-build-pages@v1
      #   with:
      #     source: ./dist/
      #     destination: ./_site

      # - name: Upload page artifact
      #   uses: actions/upload-pages-artifact@v2

      - name: upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: dist
          path: |
            dist

